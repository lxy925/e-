{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/医伴小程序/e-/pages/study/study.vue?f92a","webpack:///D:/医伴小程序/e-/pages/study/study.vue?bcd7","webpack:///D:/医伴小程序/e-/pages/study/study.vue?a986","uni-app:///pages/study/study.vue","webpack:///D:/医伴小程序/e-/pages/study/study.vue?5ee2","webpack:///D:/医伴小程序/e-/pages/study/study.vue?705e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","titles","total","current","select","subject","percent","score","errorScore","showAnswer","answeredIndexes","errorOptions","onLoad","uniCloud","console","title","options","code","option","answer","answered","firstUnansweredIndex","item","methods","radioChange","uni","icon","selects","setTimeout","showErrorOptions","url","prev","next","clear","content","showCancel","success"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmCtnB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;IAEAC;MACAC;MACA;MAEA;QACAA;QACA;MACA;MAEA;QACA;UAAA;YACAC;YACAC;cAAA;gBAAAC;gBAAAC;cAAA;gBACAD;gBACAC;cACA;YAAA;YACAC;YACAC;YACAhB;UACA;QAAA;QAEA;QACA;;QAEA;QACA;UAAA;QAAA;QACA;UACA;UACAiB;QACA;QAEA;QACA;QACA;;QAEA;QACA;UACA;YAAA;YACAC;YACAA;UACA;QACA;MACA;QACAR;MACA;IACA;MACAA;IACA;EACA;EACAS;IACAC;MAAA;MACA;MACA;MACA;MAEA;QACAC;UACAV;UACAW;QACA;QACA;MACA;QACAD;UACAV;UACAW;QACA;QACA;UAAAtB;QAAA;QACA;QACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;QACA;MACA;MACA;;MAEA;MACA;QACAG;QACAC;QACAE;QACAC;QACAgB;UAAA;QAAA;MACA;;MACAF;;MAEA;MACAG;QACA;QACA;QACA;QAEA;UACAH;YACAV;YACAW;UACA;UACAZ;UACA;QACA;QAEA;QACA;QACA;MACA;IACA;IACAe;MACAJ;MACAA;QACAK;MACA;IACA;IACAC;MACA;QACAN;UACAV;UACAW;QACA;QACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAM;MACA;QACAP;UACAV;UACAW;QACA;QACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAO;MAAA;MACA;MACAR;QACAV;QACAmB;QACAC;QACAC;UACA;YACA;YACA;YACA;YACA;YACA;YACA;cACAd;cACAA;YACA;YACA;YACA;YACA;YACA;YACA;;YAEA;YACAG;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxOA;AAAA;AAAA;AAAA;AAAq3B,CAAgB,o2BAAG,EAAC,C;;;;;;;;;;;ACAz4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/study/study.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/study/study.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./study.vue?vue&type=template&id=7ca426cc&\"\nvar renderjs\nimport script from \"./study.vue?vue&type=script&lang=js&\"\nexport * from \"./study.vue?vue&type=script&lang=js&\"\nimport style0 from \"./study.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/study/study.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./study.vue?vue&type=template&id=7ca426cc&\"","var components\ntry {\n  components = {\n    customNav: function () {\n      return import(\n        /* webpackChunkName: \"components/custom-nav/custom-nav\" */ \"@/components/custom-nav/custom-nav.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./study.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./study.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"all\">\n\t\t<custom-nav title=\"e-study\" :isHomePage=\"false\"></custom-nav>\n\t\t<view class=\"title\">当前第 {{ current }} 题 / 共 {{ total }} 题</view>\n\t\t<progress :percent=\"percent\" show-info border-radius=\"20\" stroke-width=\"18\" class=\"progress\" />\n\t\t<view class=\"page-section-title\">{{ subject.title }}</view>\n\t\t\t<radio-group @change=\"radioChange\" :key=\"current\">\n\t\t\t\t<view class=\"radio-item\" v-for=\"(item, index) in subject.options\" :key=\"index\" >\n\t\t\t\t\t<radio \n    :value=\"item.code\" \n    :checked=\"showAnswer ? item.code === subject.answer : item.code === select\"\n    :color=\"showAnswer ? (item.code === subject.answer ? 'green' : 'red') : '#333'\"\n/>\n\t\t\t\t\t<text :class=\"{\n\t\t\t\t\t\t'red': showAnswer && item.code === select && item.code !== subject.answer,\n\t\t\t\t\t\t'green': showAnswer && item.code === subject.answer\n\t\t\t\t\t}\">{{ item.option }}</text>\n\t\t\t\t</view>\n\t\t\t</radio-group>\n\t\t\t<view class=\"answer\" v-if=\"showAnswer\">\n\t\t\t\t<text>正确答案：{{ subject.answer }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"score\">\n\t\t\t\t<text>总共答对{{ score }}题 / 答错{{ errorScore }}题</text>\n\t\t\t</view>\n\t\t\t<view class=\"button-group\">\n\t\t\t\t<button @click=\"prev\" class=\"prev\">上一题</button>\n\t\t\t\t<button @click=\"showErrorOptions\" class=\"error-button\" >查看错题</button>\n\t\t\t\t<button @click=\"clear\" class=\"clear\">重新刷题</button>\n\t\t\t\t<button @click=\"next\" class=\"next\">下一题</button>\n\t\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      titles: [],\n      total: 0,\n      current: 1,\n      select: '',\n      subject: null,\n      percent: 0,\n      score: 0, // 答对题数\n      errorScore: 0, // 答错题数\n      showAnswer: false,\n      answeredIndexes: [], // 已完成的题目索引\n      errorOptions: [], // 错题记录\n    };\n  },\n  onLoad() {\n    // 从本地存储中读取答题记录\n    const quizData = uni.getStorageSync('quizData') || {};\n    this.score = quizData.score || 0;\n    this.errorScore = quizData.errorScore || 0;\n    this.answeredIndexes = Array.isArray(quizData.answeredIndexes) ? quizData.answeredIndexes : [];\n    this.errorOptions = Array.isArray(quizData.errorOptions) ? quizData.errorOptions : [];\n\n    uniCloud.database().collection('questions').get().then((res) => {\n      console.log('数据库返回:', res);\n      const data = res.result.data;\n\n      if (!data || !data.length) {\n        console.error('未获取到题目数据');\n        return;\n      }\n\n      try {\n        const questions = data[0].questions.map((q) => ({\n          title: q.question,\n          options: Object.entries(q.options).map(([code, option]) => ({\n            code,\n            option,\n          })),\n          answer: q.answer,\n          answered: false,\n          select: '',\n        }));\n\n        this.titles = questions;\n        this.total = this.titles.length;\n\n        // 找到第一道未完成的题目\n        let firstUnansweredIndex = this.titles.findIndex((_, index) => !this.answeredIndexes.includes(index));\n        if (firstUnansweredIndex === -1) {\n          // 如果所有题目都已完成，跳转到第一题\n          firstUnansweredIndex = 0;\n        }\n\n        this.current = firstUnansweredIndex + 1; // 更新当前题目索引\n        this.subject = this.titles[firstUnansweredIndex];\n        this.percent = ((firstUnansweredIndex) / this.titles.length * 100).toFixed(2);\n\n        // 恢复之前答题的状态\n        this.titles.forEach((item, index) => {\n          if (this.answeredIndexes.includes(index)) {\n            item.answered = true;\n            item.select = quizData.selects?.[index] || ''; // 恢复用户之前的选择\n          }\n        });\n      } catch (error) {\n        console.error('数据处理错误:', error);\n      }\n    }).catch((err) => {\n      console.error('获取题目失败:', err);\n    });\n  },\n  methods: {\n    radioChange(e) {\n      let select = e.detail.value;\n      this.select = select;\n      this.showAnswer = true;\n\n      if (select === this.subject.answer) {\n        uni.showToast({\n          title: '答对了！',\n          icon: 'success',\n        });\n        this.score++;\n      } else {\n        uni.showToast({\n          title: '答错了！',\n          icon: 'error',\n        });\n        let subjectnow = { ...this.subject, select }; // 创建一个副本\n        this.errorOptions.push(subjectnow); // 添加到错题记录\n        this.errorScore++;\n      }\n\n      // 更新当前题目的答题状态\n      this.titles[this.current - 1].answered = true;\n      this.titles[this.current - 1].select = select;\n\n      // 确保 answeredIndexes 是一个数组\n      if (!Array.isArray(this.answeredIndexes)) {\n        this.answeredIndexes = [];\n      }\n      this.answeredIndexes.push(this.current - 1);\n\n      // 保存答题记录到本地存储\n      const quizData = {\n        score: this.score,\n        errorScore: this.errorScore,\n        answeredIndexes: this.answeredIndexes,\n        errorOptions: this.errorOptions,\n        selects: this.titles.map((item) => item.select), // 保存每题的选择\n      };\n      uni.setStorageSync('quizData', quizData);\n\n      // 3秒后进入下一题\n      setTimeout(() => {\n        this.showAnswer = false;\n        let num = this.current + 1;\n        this.percent = ((num - 1) / this.titles.length * 100).toFixed(2);\n\n        if (num > this.titles.length) {\n          uni.showToast({\n            title: '已经是最后一题了！',\n            icon: 'none',\n          });\n          console.log(this.errorOptions);\n          return;\n        }\n\n        this.current = num;\n        this.subject = this.titles[num - 1];\n        this.select = this.subject.answered ? this.subject.select : '';\n      }, 2000);\n    },\n    showErrorOptions() {\n      uni.setStorageSync('errorOptions', this.errorOptions);\n      uni.navigateTo({\n        url: '/pages/showerror/showerror',\n      });\n    },\n    prev() {\n      if (this.current == 1) {\n        uni.showToast({\n          title: '已经是第一题了！',\n          icon: 'none',\n        });\n        return;\n      }\n      this.current--;\n      this.subject = this.titles[this.current - 1];\n      this.select = this.subject.answered ? this.subject.select : '';\n      this.showAnswer = this.subject.answered;\n    },\n    next() {\n      if (this.current == this.titles.length) {\n        uni.showToast({\n          title: '已经是最后一题了！',\n          icon: 'none',\n        });\n        return;\n      }\n      this.current++;\n      this.subject = this.titles[this.current - 1];\n      this.select = this.subject.answered ? this.subject.select : '';\n      this.showAnswer = this.subject.answered;\n    },\n\tclear() {\n      // 弹出确认框\n      uni.showModal({\n        title: '确认操作',\n        content: '是否确认清空所有答题记录？',\n        showCancel: true,\n        success: (res) => {\n          if (res.confirm) {\n            // 用户点击确认，清空所有答题记录并重置状态\n            this.score = 0;\n            this.errorScore = 0;\n            this.answeredIndexes = [];\n            this.errorOptions = [];\n            this.titles.forEach((item) => {\n              item.answered = false;\n              item.select = '';\n            });\n            this.current = 1;\n            this.subject = this.titles[0];\n            this.percent = 0;\n            this.select = '';\n            this.showAnswer = false;\n\n            // 清空本地存储的答题记录\n            uni.removeStorageSync('quizData');\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n\n\n\n<style>\n.all {\n\tmargin-top: 400rpx;\n\tbackground-color: #f9f9f9;\n\tborder-radius: 20rpx;\n\tpadding: 80rpx 20rpx ;\n\tbox-shadow: 0 0 10rpx rgba(0, 0, 0, 0.1);\n\tmargin-left: 40rpx;\n\tmargin-right: 40rpx;\n\t\n}\n.title{\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tmargin-bottom: 20rpx;\n\ttext-align: center;\n\tcolor:rgb(246, 109, 109);\n}\n.progress{\n\tmargin-bottom: 20rpx;\n\tmargin-left: 50rpx;\n\tmargin-right: 30rpx;\n}\n.page-section-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tmargin-bottom: 20rpx;\n\tmargin-top: 20rpx;\n\tmargin-left: 30rpx;\n\tmargin-right: 30rpx;\n}\n\n.radio-item{\n\tcolor: #000;\n\tmargin-left: 30rpx;\n\tmargin-right: 30rpx;\n\tmargin-top: 20rpx;\n}\n.red {\n\tcolor: red;\n}\n.green {\n\tcolor: green;\n\tfont-weight: bold;\n}\n.answer{\n\tmargin-left: 30rpx;\n\tmargin-right: 30rpx;\n\tmargin-top: 20rpx;\n\tcolor:green;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n}\n.score{\n\ttext-align: center;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tmargin-top: 50rpx;\n\tcolor:green;\n}\n/* 将按钮组放置在页面底部 */\n.button-group {\n    position: fixed; /* 固定定位 */\n    bottom: 0;       /* 置于页面底部 */\n    left: 0;         /* 置于页面左侧 */\n    width: 100%;     /* 宽度占满整个页面 */\n    display: flex;   /* 使用弹性布局 */\n    justify-content:space-around; /* 子元素在主轴上均匀分布 */\n    padding: 10px 0px;   /* 添加内边距，避免内容紧贴边缘 */\n    background-color: #f9f9f9; /* 添加背景色（可选） */\n    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); /* 添加阴影（可选） */\n}\n\n/* 为按钮添加样式 */\n.button-group button {\n    padding: 10px 10px; /* 按钮内边距 */\n    font-size: 16px;    /* 字体大小 */\n    border: none;       /* 去掉边框 */\n    border-radius: 5px; /* 圆角边框 */\n    color:darkturquoise;       /* 文字颜色 */\n    cursor: pointer;    /* 鼠标悬停时显示手型 */\n}\n\n/* 按钮悬停效果 */\n.button-group button:hover {\n    background-color:rgb(203, 251, 235); /* 悬停时背景色变深 */\n}\n\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./study.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./study.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1739809536479\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}